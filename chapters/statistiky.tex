\chapter{Štatistiky}
\label{statistiky}
Analýzou jednotlivých APK súborov získame detailné informácie o jednotlivých aplikáciách. Pre ucelenejší pohľad na všeobecné vlastnosti a atribúty Android aplikácií je vhodné rozšíriť analýzu jednotlivých aplikácií na skúmanie väčšej množiny APK balíčkov. Keďže databáza APK súborov vytvorená v tejto práci obsahuje dostatočne veľkú vzorku približne 20000 APK súborov, ktoré pochádzajú z rôznych oficiálnych aj alternatívnych zdrojov, poskytuje dobrú vzorku na určenie štatistických údajov o Android aplikáciách. Štatistické informácie prezentované v tejto kapitole sa viažu k aplikáciám dostupným v rokoch 2014--2016 a teda sú aktuálne pre spomenuté obdobie.

Vyvinutá aplikácia \zv{ApkAnalyzer} poskytuje možnosť výpočtu štatistík nad množinou APK súborov. Funkcionalita výpočtu štatistických informácií sa aktivuje pomocou prepínača \zv{–statistics} pri spustení programu z príkazového riadku. Ako vstup aplikácie slúžia JSON súbory vytvorené analýzou popísanou v kapitole \ref{analyza}. Výstupom je súbor vo formáte JSON obsahujúci vypočítané štatistické dáta. Pri vlastnostiach, ktorých hodnota je vyjadrená číselne sú vypočítané základné matematické štatistiky ako je aritmetický priemer, modus, medián, rozptyl, smerodajná odchýlka, minimum a maximum. Pri najnižšej a najvyššej hodnote obsahuje výstup aj názov aplikácií, ktoré tieto hodnoty dosahujú. V prípade vlastností, ktoré nadobúdajú obmedzený počet predom definovaných hodnôt je určené percentuálne zastúpenie jednotlivých hodnôt.

\section{Získané dáta}
\subsection*{Veľkosť APK súborov}
Analýzou databázy APK súborov sa zistilo, že medián veľkosti APK súborov je 5,26\,MB, priemer dosahuje hodnotu 10.19\,MB. To znamená, že existuje menšinová časť APK súborov, ktorých veľkosť je výrazne väčšia, ako veľkosť ostatných APK súborov.

\subsection*{Počet súborov v APK balíku}
Medián celkového počtu súborov v APK balíčku je 397, aritmetický priemer má hodnotu približne 730 súborov. 

\subsection*{Inštalačná politika}
Android poskytuje aplikáciám možnosť špecifikácie preferovaného pamäťového priestoru (interná alebo externá pamäť) a prípadnú možnosť presunutia nainštalovanej aplikácie (viď \ref{el_manifest}). Až 49\,\% aplikácií neumožňuje inštaláciu alebo presun na externé pamäťové médiá.  40\,\% aplikácií preferuje inštaláciu na interné úložisko s možnosťou presunu do externej pamäte. 10,5\,\% aplikácií uprednostňuje inštaláciu na externé pamäťové médium. Rozdelenie hodnôt je zobrazené v grafe \ref{fig:installLoc}.

\begin{figure}[!htbp]
\centering
\begin{tikzpicture}[scale=0.8,align=center]
        \pie[text=label,rotate=240,
             explode=0,
             color={blue!70,cyan!70,red!70,orange!50}]{49.03/internalOnly, 40.47/auto, 10.5/preferExternal}
    \end{tikzpicture}
\label{fig:installLoc}
\caption{Hodnoty atribútu \zv{android:installLocation}}
\end{figure}

\subsection*{Komponenty aplikácií}

Základnou funkčnou jednotkou aplikácie je aktivita (viď \ref{el_activity}).Medián počtu aktivít medzi analyzovanými aplikáciami je  10, priemer dosahuje hodnotu 20,23. Aplikácie obsahujú najčastejšie 2 aktivity.\\Priemerný počet služieb definovaných v aplikácii je 3,99, medián je 1, no najčastejším prípadom je, že aplikácia nedefinuje žiadnu službu.

\subsection*{Verzie Android SDK}

Najčastejšou najnižšou vyžadovanou verziou Android SDK je verzia 9 s 21,3\% zastúpením. Táto verzia je asociovaná so systémom Android 2.3 až Android 2.3.2 \zv{Gingerbread} a bola vydaná v novembri 2010. Nanižšie vyžadované verzie Android SDK v našej databáze APK súborov sú zobrazené v grafe \ref{tab:minSdk}.
\\Až 25,64\,\% aplikácií je primárne určených na SDK verziu 19. SDK 19 bol vydaný koncom roka 2013 spolu s verziou Android 4.4 \zv{KitKat}. Najčastejšie hodnoty primárnej verzie Android SDK obsahuje tabuľka \ref{tab:targetSdk}.

\subsection*{Prístupové oprávnenia}

Aplikácie najčastejšie deklarujú využívanie 4 prístupových oprávnení (viď \ref{el_uses-permission}). Medián počtu vyžadovaných oprávnení je 8. 10 najčastejšie využívaných oprávnení spolu s ich percentuálnym zastúpením v analyzovanej vzorke aplikácií je uvedených v tabuľke \ref{tab:permissions}. 
\begin{table}[!htbp]
\centering
  \begin{tabular}{|l r|}
    \hline
    Názov & \% \\\hline\hline
    android.permission.internet & 92,9 \\
    android.permission.access\_network\_state & 87,9 \\
    android.permission.write\_external\_storage & 75,2 \\
    android.permission.wake\_lock & 49,5 \\
    android.permission.read\_phone\_state & 49,4 \\
    android.permission.access\_wifi\_state & 44,7 \\
    android.permission.vibrate & 43,6 \\
    android.permission.get\_accounts & 31,3 \\
    android.permission.receive\_boot\_completed & 30,5 \\
    android.permission.vending.billing & 27,1 \\
    \hline
  \end{tabular}
  \caption{Najpoužívanejšie prístupové oprávnenia}
  \label{tab:permissions}
\end{table}

\subsection*{Využité vlastnosti}
Aplikácie deklarujú nízky počet využívaných vlastností (viď \ref{el_uses-permission}). Aritmetický priemer je 1,44, medián a a modus sú nulové. Najčastejšie deklarované je využívanie vlastností uvedených v tabuľke \ref{tab:features}.

\subsection*{Podpis APK balíčka}
Na podpisovanie APK balíčkov je v najčastejšie využitý algoritmus \zv{SHA1withRSA}, ktorý využíva až 74,87\,\% aplikácií. 15,56\,\% aplikácií je podpísaných pomocou algoritmu \zv{SHA256withRSA}, podpis pomocou \zv{MD5withRSA} je využitý v 5,88\,\% prípadoch. Percentuálne rozdelenie algoritmov použitých na podpis APK súborov je znázornený na grafe \ref{fig:signAlg}.


\begin{figure}[!htbp]
\centering
\begin{tikzpicture}[scale=0.7,align=center]
        \pie[text=label,rotate=240,
             explode=0.2,
             color={blue!70,cyan!70,red!70,orange!50}]{74.9/SHA1withRSA, 15.6/SHA256withRSA, 5.9/MD5withRSA, 3.6/SHA1withDSA}
    \end{tikzpicture}
\label{fig:signAlg}
\caption{Algoritmus podpisu APK balíčku}
\end{figure}

\subsection*{Lokalizácia}
Aplikácie sú okrem základného jazyka lokalizované najčastejšie v 17 iných jazykoch. Aritmetický priemer počtu lokalizácií je 31,42. Lokalizácie sú ovplyvnené tým, že časť aplikácií bola stiahnutá z portálov určených pre strednú Európu. V českom jazyku je lokalizovaných 49\,\% aplikácií, v slovenčine 46\,\%. Najčastejšie lokalizácie aplikácií sú uvedené v tabuľke \ref{tab:language}.


\subsection*{Obrázkové súbory}
Analýza ukázala, že aplikácie využívajú množstvo obrázkových súborov. Medián celkového počtu obrázkových súborov v APK balíčku je 210, aritmetický priemer dosahuje hodnotu 462 a najčastejším počtom obrázkových súborov je 5. Medián počtu rozdielnych obrázkov (veľkosť a rozlíšenie sa neberie do úvahy) je 134. Najčastejším formátom je PNG, aplikácia obsahuje priemerne 343 takýchto súborov.